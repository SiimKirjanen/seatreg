(function(){Date.shortMonths=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Date.longMonths=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.shortDays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Date.longDays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var t={d:function(){return(this.getDate()<10?"0":"")+this.getDate()},D:function(){return Date.shortDays[this.getDay()]},j:function(){return this.getDate()},l:function(){return Date.longDays[this.getDay()]},N:function(){return this.getDay()+1},S:function(){return this.getDate()%10==1&&11!=this.getDate()?"st":this.getDate()%10==2&&12!=this.getDate()?"nd":this.getDate()%10==3&&13!=this.getDate()?"rd":"th"},w:function(){return this.getDay()},z:function(){var t=new Date(this.getFullYear(),0,1);return Math.ceil((this-t)/864e5)},W:function(){var t=new Date(this.getFullYear(),0,1);return Math.ceil(((this-t)/864e5+t.getDay()+1)/7)},F:function(){return Date.longMonths[this.getMonth()]},m:function(){return(this.getMonth()<9?"0":"")+(this.getMonth()+1)},M:function(){return Date.shortMonths[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){var t=new Date;return new Date(t.getFullYear(),t.getMonth(),0).getDate()},L:function(){var t=this.getFullYear();return t%400==0||t%100!=0&&t%4==0},o:function(){var t=new Date(this.valueOf());return t.setDate(t.getDate()-(this.getDay()+6)%7+3),t.getFullYear()},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return Math.floor(1e3*((this.getUTCHours()+1)%24+this.getUTCMinutes()/60+this.getUTCSeconds()/3600)/24)},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){return((this.getHours()%12||12)<10?"0":"")+(this.getHours()%12||12)},H:function(){return(this.getHours()<10?"0":"")+this.getHours()},i:function(){return(this.getMinutes()<10?"0":"")+this.getMinutes()},s:function(){return(this.getSeconds()<10?"0":"")+this.getSeconds()},u:function(){var t=this.getMilliseconds();return(10>t?"00":100>t?"0":"")+t},e:function(){return"Not Yet Supported"},I:function(){for(var t=null,e=0;12>e;++e){var i=new Date(this.getFullYear(),e,1),s=i.getTimezoneOffset();if(null===t)t=s;else{if(t>s){t=s;break}if(s>t)break}}return this.getTimezoneOffset()==t|0},O:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+"00"},P:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+":00"},T:function(){return this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1")},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return this.format("Y-m-d\\TH:i:sP")},r:function(){return this.toString()},U:function(){return this.getTime()/1e3}};Date.prototype.format=function(e){var i=this;return e.replace(/(\\?)(.)/g,function(e,s,o){return""===s&&t[o]?t[o].call(i):o})}}).call(this),function(t,e,i){function s(t,s){this.wrapper="string"==typeof t?e.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={zoomMin:1,zoomMax:4,startZoom:1,resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var o in s)this.options[o]=s[o];this.translateZ=this.options.HWCompositing&&r.hasPerspective?" translateZ(0)":"",this.options.useTransition=r.hasTransition&&this.options.useTransition,this.options.useTransform=r.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?r.ease[this.options.bounceEasing]||r.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this.scale=i.min(i.max(this.options.startZoom,this.options.zoomMin),this.options.zoomMax),this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function o(t,i,s){var o=e.createElement("div"),n=e.createElement("div");return s===!0&&(o.style.cssText="position:absolute;z-index:9999",n.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),n.className="iScrollIndicator","h"==t?(s===!0&&(o.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",n.style.height="100%"),o.className="iScrollHorizontalScrollbar"):(s===!0&&(o.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",n.style.width="100%"),o.className="iScrollVerticalScrollbar"),o.style.cssText+=";overflow:hidden",i||(o.style.pointerEvents="none"),o.appendChild(n),o}function n(i,s){this.wrapper="string"==typeof s.el?e.querySelector(s.el):s.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=i,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var o in s)this.options[o]=s[o];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(r.addEvent(this.indicator,"touchstart",this),r.addEvent(t,"touchend",this)),this.options.disablePointer||(r.addEvent(this.indicator,r.prefixPointerEvent("pointerdown"),this),r.addEvent(t,r.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(r.addEvent(this.indicator,"mousedown",this),r.addEvent(t,"mouseup",this))),this.options.fade&&(this.wrapperStyle[r.style.transform]=this.scroller.translateZ,this.wrapperStyle[r.style.transitionDuration]=r.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}var a=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)},r=function(){function s(t){return a===!1?!1:""===a?t:a+t.charAt(0).toUpperCase()+t.substr(1)}var o={},n=e.createElement("div").style,a=function(){for(var t,e=["t","webkitT","MozT","msT","OT"],i=0,s=e.length;s>i;i++)if(t=e[i]+"ransform",t in n)return e[i].substr(0,e[i].length-1);return!1}();o.getTime=Date.now||function(){return(new Date).getTime()},o.extend=function(t,e){for(var i in e)t[i]=e[i]},o.addEvent=function(t,e,i,s){t.addEventListener(e,i,!!s)},o.removeEvent=function(t,e,i,s){t.removeEventListener(e,i,!!s)},o.prefixPointerEvent=function(e){return t.MSPointerEvent?"MSPointer"+e.charAt(9).toUpperCase()+e.substr(10):e},o.momentum=function(t,e,s,o,n,a){var r,l,h=t-e,c=i.abs(h)/s;return a=void 0===a?6e-4:a,r=t+c*c/(2*a)*(0>h?-1:1),l=c/a,o>r?(r=n?o-n/2.5*(c/8):o,h=i.abs(r-t),l=h/c):r>0&&(r=n?n/2.5*(c/8):0,h=i.abs(t)+r,l=h/c),{destination:i.round(r),duration:l}};var r=s("transform");return o.extend(o,{hasTransform:r!==!1,hasPerspective:s("perspective")in n,hasTouch:"ontouchstart"in t,hasPointer:t.PointerEvent||t.MSPointerEvent,hasTransition:s("transition")in n}),o.isBadAndroid=/Android /.test(t.navigator.appVersion)&&!/Chrome\/\d/.test(t.navigator.appVersion),o.extend(o.style={},{transform:r,transitionTimingFunction:s("transitionTimingFunction"),transitionDuration:s("transitionDuration"),transitionDelay:s("transitionDelay"),transformOrigin:s("transformOrigin")}),o.hasClass=function(t,e){var i=new RegExp("(^|\\s)"+e+"(\\s|$)");return i.test(t.className)},o.addClass=function(t,e){if(!o.hasClass(t,e)){var i=t.className.split(" ");i.push(e),t.className=i.join(" ")}},o.removeClass=function(t,e){if(o.hasClass(t,e)){var i=new RegExp("(^|\\s)"+e+"(\\s|$)","g");t.className=t.className.replace(i," ")}},o.offset=function(t){for(var e=-t.offsetLeft,i=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,i-=t.offsetTop;return{left:e,top:i}},o.preventDefaultException=function(t,e){for(var i in e)if(e[i].test(t[i]))return!0;return!1},o.extend(o.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),o.extend(o.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return i.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){var e=4;return(t-=1)*t*((e+1)*t+e)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){var e=.22,s=.4;return 0===t?0:1==t?1:s*i.pow(2,-10*t)*i.sin(2*(t-e/4)*i.PI/e)+1}}}),o.tap=function(t,i){var s=e.createEvent("Event");s.initEvent(i,!0,!0),s.pageX=t.pageX,s.pageY=t.pageY,t.target.dispatchEvent(s)},o.click=function(t){var i,s=t.target;/(SELECT|INPUT|TEXTAREA)/i.test(s.tagName)||(i=e.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,t.view,1,s.screenX,s.screenY,s.clientX,s.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),i._constructed=!0,s.dispatchEvent(i))},o}();s.prototype={version:"5.1.3",_init:function(){this._initEvents(),this.options.zoom&&this._initZoom(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(t){if(!(1!=r.eventType[t.type]&&0!==t.button||!this.enabled||this.initiated&&r.eventType[t.type]!==this.initiated)){!this.options.preventDefault||r.isBadAndroid||r.preventDefaultException(t.target,this.options.preventDefaultException)||t.preventDefault();var e,s=t.touches?t.touches[0]:t;this.initiated=r.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=r.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,e=this.getComputedPosition(),this._translate(i.round(e.x),i.round(e.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=s.pageX,this.pointY=s.pageY,this._execEvent("beforeScrollStart")}},_move:function(t){if(this.enabled&&r.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var e,s,o,n,a=t.touches?t.touches[0]:t,l=a.pageX-this.pointX,h=a.pageY-this.pointY,c=r.getTime();if(this.pointX=a.pageX,this.pointY=a.pageY,this.distX+=l,this.distY+=h,o=i.abs(this.distX),n=i.abs(this.distY),!(c-this.endTime>300&&10>o&&10>n)){if(this.directionLocked||this.options.freeScroll||(this.directionLocked=o>n+this.options.directionLockThreshold?"h":n>=o+this.options.directionLockThreshold?"v":"n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)t.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);h=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)t.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}l=this.hasHorizontalScroll?l:0,h=this.hasVerticalScroll?h:0,e=this.x+l,s=this.y+h,(e>0||e<this.maxScrollX)&&(e=this.options.bounce?this.x+l/3:e>0?0:this.maxScrollX),(s>0||s<this.maxScrollY)&&(s=this.options.bounce?this.y+h/3:s>0?0:this.maxScrollY),this.directionX=l>0?-1:0>l?1:0,this.directionY=h>0?-1:0>h?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(e,s),c-this.startTime>300&&(this.startTime=c,this.startX=this.x,this.startY=this.y)}}},_end:function(t){if(this.enabled&&r.eventType[t.type]===this.initiated){this.options.preventDefault&&!r.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault();var e,s,o=(t.changedTouches?t.changedTouches[0]:t,r.getTime()-this.startTime),n=i.round(this.x),a=i.round(this.y),l=i.abs(n-this.startX),h=i.abs(a-this.startY),c=0,p="";if(this.isInTransition=0,this.initiated=0,this.endTime=r.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(n,a),!this.moved)return this.options.tap&&r.tap(t,this.options.tap),this.options.click&&r.click(t),void this._execEvent("scrollCancel");if(this._events.flick&&200>o&&100>l&&100>h)return void this._execEvent("flick");if(this.options.momentum&&300>o&&(e=this.hasHorizontalScroll?r.momentum(this.x,this.startX,o,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:n,duration:0},s=this.hasVerticalScroll?r.momentum(this.y,this.startY,o,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:a,duration:0},n=e.destination,a=s.destination,c=i.max(e.duration,s.duration),this.isInTransition=1),this.options.snap){var d=this._nearestSnap(n,a);this.currentPage=d,c=this.options.snapSpeed||i.max(i.max(i.min(i.abs(n-d.x),1e3),i.min(i.abs(a-d.y),1e3)),300),n=d.x,a=d.y,this.directionX=0,this.directionY=0,p=this.options.bounceEasing}return n!=this.x||a!=this.y?((n>0||n<this.maxScrollX||a>0||a<this.maxScrollY)&&(p=r.ease.quadratic),void this.scrollTo(n,a,c,p)):void this._execEvent("scrollEnd")}}},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},resetPosition:function(t){var e=this.x,i=this.y;return t=t||0,!this.hasHorizontalScroll||this.x>0?e=0:this.x<this.maxScrollX&&(e=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),e==this.x&&i==this.y?!1:(this.scrollTo(e,i,t,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=i.round(this.scroller.offsetWidth*this.scale),this.scrollerHeight=i.round(this.scroller.offsetHeight*this.scale),this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=r.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},off:function(t,e){if(this._events[t]){var i=this._events[t].indexOf(e);i>-1&&this._events[t].splice(i,1)}},_execEvent:function(t){if(this._events[t]){var e=0,i=this._events[t].length;if(i)for(;i>e;e++)this._events[t][e].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,e,i,s){t=this.x+t,e=this.y+e,i=i||0,this.scrollTo(t,e,i,s)},scrollTo:function(t,e,i,s){s=s||r.ease.circular,this.isInTransition=this.options.useTransition&&i>0,!i||this.options.useTransition&&s.style?(this._transitionTimingFunction(s.style),this._transitionTime(i),this._translate(t,e)):this._animate(t,e,i,s.fn)},scrollToElement:function(t,e,s,o,n){if(t=t.nodeType?t:this.scroller.querySelector(t)){var a=r.offset(t);a.left-=this.wrapperOffset.left,a.top-=this.wrapperOffset.top,s===!0&&(s=i.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),o===!0&&(o=i.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),a.left-=s||0,a.top-=o||0,a.left=a.left>0?0:a.left<this.maxScrollX?this.maxScrollX:a.left,a.top=a.top>0?0:a.top<this.maxScrollY?this.maxScrollY:a.top,e=void 0===e||null===e||"auto"===e?i.max(i.abs(this.x-a.left),i.abs(this.y-a.top)):e,this.scrollTo(a.left,a.top,e,n)}},_transitionTime:function(t){if(t=t||0,this.scrollerStyle[r.style.transitionDuration]=t+"ms",!t&&r.isBadAndroid&&(this.scrollerStyle[r.style.transitionDuration]="0.001s"),this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTime(t)},_transitionTimingFunction:function(t){if(this.scrollerStyle[r.style.transitionTimingFunction]=t,this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTimingFunction(t)},_translate:function(t,e){if(this.options.useTransform?this.scrollerStyle[r.style.transform]="translate("+t+"px,"+e+"px) scale("+this.scale+") "+this.translateZ:(t=i.round(t),e=i.round(e),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=e+"px"),this.x=t,this.y=e,this.indicators)for(var s=this.indicators.length;s--;)this.indicators[s].updatePosition()},_initEvents:function(e){var i=e?r.removeEvent:r.addEvent,s=this.options.bindToWrapper?this.wrapper:t;i(t,"orientationchange",this),i(t,"resize",this),this.options.click&&i(this.wrapper,"click",this,!0),this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(s,"mousemove",this),i(s,"mousecancel",this),i(s,"mouseup",this)),r.hasPointer&&!this.options.disablePointer&&(i(this.wrapper,r.prefixPointerEvent("pointerdown"),this),i(s,r.prefixPointerEvent("pointermove"),this),i(s,r.prefixPointerEvent("pointercancel"),this),i(s,r.prefixPointerEvent("pointerup"),this)),r.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(s,"touchmove",this),i(s,"touchcancel",this),i(s,"touchend",this)),i(this.scroller,"transitionend",this),i(this.scroller,"webkitTransitionEnd",this),i(this.scroller,"oTransitionEnd",this),i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var e,i,s=t.getComputedStyle(this.scroller,null);return this.options.useTransform?(s=s[r.style.transform].split(")")[0].split(", "),e=+(s[12]||s[4]),i=+(s[13]||s[5])):(e=+s.left.replace(/[^-\d.]/g,""),i=+s.top.replace(/[^-\d.]/g,"")),{x:e,y:i}},_initIndicators:function(){function t(t){for(var e=r.indicators.length;e--;)t.call(r.indicators[e])}var e,i=this.options.interactiveScrollbars,s="string"!=typeof this.options.scrollbars,a=[],r=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(e={el:o("v",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:s,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(e.el),a.push(e)),this.options.scrollX&&(e={el:o("h",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:s,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(e.el),a.push(e))),this.options.indicators&&(a=a.concat(this.options.indicators));for(var l=a.length;l--;)this.indicators.push(new n(this,a[l]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){t(function(){this.fade()})}),this.on("scrollCancel",function(){t(function(){this.fade()})}),this.on("scrollStart",function(){t(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){t(function(){this.fade(1,!0)})})),this.on("refresh",function(){t(function(){this.refresh()})}),this.on("destroy",function(){t(function(){this.destroy()}),delete this.indicators})},_initZoom:function(){this.scrollerStyle[r.style.transformOrigin]="0 0"},_zoomStart:function(t){var e=i.abs(t.touches[0].pageX-t.touches[1].pageX),s=i.abs(t.touches[0].pageY-t.touches[1].pageY);this.touchesDistanceStart=i.sqrt(e*e+s*s),this.startScale=this.scale,this.originX=i.abs(t.touches[0].pageX+t.touches[1].pageX)/2+this.wrapperOffset.left-this.x,this.originY=i.abs(t.touches[0].pageY+t.touches[1].pageY)/2+this.wrapperOffset.top-this.y,this._execEvent("zoomStart")},_zoom:function(t){if(this.enabled&&r.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var e,s,o,n=i.abs(t.touches[0].pageX-t.touches[1].pageX),a=i.abs(t.touches[0].pageY-t.touches[1].pageY),l=i.sqrt(n*n+a*a),h=1/this.touchesDistanceStart*l*this.startScale;this.scaled=!0,h<this.options.zoomMin?h=.5*this.options.zoomMin*i.pow(2,h/this.options.zoomMin):h>this.options.zoomMax&&(h=2*this.options.zoomMax*i.pow(.5,this.options.zoomMax/h)),e=h/this.startScale,s=this.originX-this.originX*e+this.startX,o=this.originY-this.originY*e+this.startY,this.scale=h,this.scrollTo(s,o,0)}},_zoomEnd:function(t){if(this.enabled&&r.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var e,i,s;this.isInTransition=0,this.initiated=0,this.scale>this.options.zoomMax?this.scale=this.options.zoomMax:this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin),this.refresh(),s=this.scale/this.startScale,e=this.originX-this.originX*s+this.startX,i=this.originY-this.originY*s+this.startY,e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),i>0?i=0:i<this.maxScrollY&&(i=this.maxScrollY),(this.x!=e||this.y!=i)&&this.scrollTo(e,i,this.options.bounceTime),this.scaled=!1,this._execEvent("zoomEnd")}},zoom:function(t,e,i,s){if(t<this.options.zoomMin?t=this.options.zoomMin:t>this.options.zoomMax&&(t=this.options.zoomMax),t!=this.scale){var o=t/this.scale;e=void 0===e?this.wrapperWidth/2:e,i=void 0===i?this.wrapperHeight/2:i,s=void 0===s?300:s,e=e+this.wrapperOffset.left-this.x,i=i+this.wrapperOffset.top-this.y,e=e-e*o+this.x,i=i-i*o+this.y,this.scale=t,this.refresh(),e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),i>0?i=0:i<this.maxScrollY&&(i=this.maxScrollY),this.scrollTo(e,i,s)}},_wheelZoom:function(t){var e,s,o=this;if(clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){o._execEvent("zoomEnd")},400),"deltaX"in t)e=-t.deltaY/i.abs(t.deltaY);else if("wheelDeltaX"in t)e=t.wheelDeltaY/i.abs(t.wheelDeltaY);else if("wheelDelta"in t)e=t.wheelDelta/i.abs(t.wheelDelta);else{if(!("detail"in t))return;e=-t.detail/i.abs(t.detail)}s=this.scale+e/5,this.zoom(s,t.pageX,t.pageY,0)},_initWheel:function(){r.addEvent(this.wrapper,"wheel",this),r.addEvent(this.wrapper,"mousewheel",this),r.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){r.removeEvent(this.wrapper,"wheel",this),r.removeEvent(this.wrapper,"mousewheel",this),r.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(t){if(this.enabled){t.preventDefault(),t.stopPropagation();var e,s,o,n,a=this;if(void 0===this.wheelTimeout&&a._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){a._execEvent("scrollEnd"),a.wheelTimeout=void 0},400),"deltaX"in t)1===t.deltaMode?(e=-t.deltaX*this.options.mouseWheelSpeed,s=-t.deltaY*this.options.mouseWheelSpeed):(e=-t.deltaX,s=-t.deltaY);else if("wheelDeltaX"in t)e=t.wheelDeltaX/120*this.options.mouseWheelSpeed,s=t.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in t)e=s=t.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in t))return;e=s=-t.detail/3*this.options.mouseWheelSpeed}if(e*=this.options.invertWheelDirection,s*=this.options.invertWheelDirection,this.hasVerticalScroll||(e=s,s=0),this.options.snap)return o=this.currentPage.pageX,n=this.currentPage.pageY,e>0?o--:0>e&&o++,s>0?n--:0>s&&n++,void this.goToPage(o,n);o=this.x+i.round(this.hasHorizontalScroll?e:0),n=this.y+i.round(this.hasVerticalScroll?s:0),o>0?o=0:o<this.maxScrollX&&(o=this.maxScrollX),n>0?n=0:n<this.maxScrollY&&(n=this.maxScrollY),this.scrollTo(o,n,0)}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var t,e,s,o,n,a,r=0,l=0,h=0,c=this.options.snapStepX||this.wrapperWidth,p=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(s=i.round(c/2),o=i.round(p/2);h>-this.scrollerWidth;){for(this.pages[r]=[],t=0,n=0;n>-this.scrollerHeight;)this.pages[r][t]={x:i.max(h,this.maxScrollX),y:i.max(n,this.maxScrollY),width:c,height:p,cx:h-s,cy:n-o},n-=p,t++;h-=c,r++}else for(a=this.options.snap,t=a.length,e=-1;t>r;r++)(0===r||a[r].offsetLeft<=a[r-1].offsetLeft)&&(l=0,e++),this.pages[l]||(this.pages[l]=[]),h=i.max(-a[r].offsetLeft,this.maxScrollX),n=i.max(-a[r].offsetTop,this.maxScrollY),s=h-i.round(a[r].offsetWidth/2),o=n-i.round(a[r].offsetHeight/2),this.pages[l][e]={x:h,y:n,width:a[r].offsetWidth,height:a[r].offsetHeight,cx:s,cy:o},h>this.maxScrollX&&l++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var t=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.x-this.startX),1e3),i.min(i.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,t)})},_nearestSnap:function(t,e){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var s=0,o=this.pages.length,n=0;if(i.abs(t-this.absStartX)<this.snapThresholdX&&i.abs(e-this.absStartY)<this.snapThresholdY)return this.currentPage;for(t>0?t=0:t<this.maxScrollX&&(t=this.maxScrollX),e>0?e=0:e<this.maxScrollY&&(e=this.maxScrollY);o>s;s++)if(t>=this.pages[s][0].cx){t=this.pages[s][0].x;break}for(o=this.pages[s].length;o>n;n++)if(e>=this.pages[0][n].cy){e=this.pages[0][n].y;break}return s==this.currentPage.pageX&&(s+=this.directionX,0>s?s=0:s>=this.pages.length&&(s=this.pages.length-1),t=this.pages[s][0].x),n==this.currentPage.pageY&&(n+=this.directionY,0>n?n=0:n>=this.pages[0].length&&(n=this.pages[0].length-1),e=this.pages[0][n].y),{x:t,y:e,pageX:s,pageY:n}},goToPage:function(t,e,s,o){o=o||this.options.bounceEasing,t>=this.pages.length?t=this.pages.length-1:0>t&&(t=0),e>=this.pages[t].length?e=this.pages[t].length-1:0>e&&(e=0);var n=this.pages[t][e].x,a=this.pages[t][e].y;s=void 0===s?this.options.snapSpeed||i.max(i.max(i.min(i.abs(n-this.x),1e3),i.min(i.abs(a-this.y),1e3)),300):s,this.currentPage={x:n,y:a,pageX:t,pageY:e},this.scrollTo(n,a,s,o)},next:function(t,e){var i=this.currentPage.pageX,s=this.currentPage.pageY;i++,i>=this.pages.length&&this.hasVerticalScroll&&(i=0,s++),this.goToPage(i,s,t,e)},prev:function(t,e){var i=this.currentPage.pageX,s=this.currentPage.pageY;i--,0>i&&this.hasVerticalScroll&&(i=0,s--),this.goToPage(i,s,t,e)},_initKeys:function(){var e,i={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(e in this.options.keyBindings)"string"==typeof this.options.keyBindings[e]&&(this.options.keyBindings[e]=this.options.keyBindings[e].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(e in i)this.options.keyBindings[e]=this.options.keyBindings[e]||i[e];r.addEvent(t,"keydown",this),this.on("destroy",function(){r.removeEvent(t,"keydown",this)})},_key:function(t){if(this.enabled){var e,s=this.options.snap,o=s?this.currentPage.pageX:this.x,n=s?this.currentPage.pageY:this.y,a=r.getTime(),l=this.keyTime||0,h=.25;switch(this.options.useTransition&&this.isInTransition&&(e=this.getComputedPosition(),this._translate(i.round(e.x),i.round(e.y)),this.isInTransition=!1),this.keyAcceleration=200>a-l?i.min(this.keyAcceleration+h,50):0,t.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?o+=s?1:this.wrapperWidth:n+=s?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?o-=s?1:this.wrapperWidth:n-=s?1:this.wrapperHeight;break;case this.options.keyBindings.end:o=s?this.pages.length-1:this.maxScrollX,n=s?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:o=0,n=0;break;case this.options.keyBindings.left:o+=s?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:n+=s?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:o-=s?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:n-=s?1:5+this.keyAcceleration>>0;break;default:return}if(s)return void this.goToPage(o,n);o>0?(o=0,this.keyAcceleration=0):o<this.maxScrollX&&(o=this.maxScrollX,this.keyAcceleration=0),n>0?(n=0,this.keyAcceleration=0):n<this.maxScrollY&&(n=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(o,n,0),this.keyTime=a}},_animate:function(t,e,i,s){function o(){var d,u,m,f=r.getTime();return f>=p?(n.isAnimating=!1,n._translate(t,e),void(n.resetPosition(n.options.bounceTime)||n._execEvent("scrollEnd"))):(f=(f-c)/i,m=s(f),d=(t-l)*m+l,u=(e-h)*m+h,n._translate(d,u),void(n.isAnimating&&a(o)))}var n=this,l=this.x,h=this.y,c=r.getTime(),p=c+i;this.isAnimating=!0,o()},handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t),this.options.zoom&&t.touches&&t.touches.length>1&&this._zoomStart(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":if(this.options.zoom&&t.touches&&t.touches[1])return void this._zoom(t);this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":if(this.scaled)return void this._zoomEnd(t);this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":if("zoom"==this.options.wheelAction)return void this._wheelZoom(t);this._wheel(t);break;case"keydown":this._key(t)}}},n.prototype={handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t)}},destroy:function(){this.options.interactive&&(r.removeEvent(this.indicator,"touchstart",this),r.removeEvent(this.indicator,r.prefixPointerEvent("pointerdown"),this),r.removeEvent(this.indicator,"mousedown",this),r.removeEvent(t,"touchmove",this),r.removeEvent(t,r.prefixPointerEvent("pointermove"),this),r.removeEvent(t,"mousemove",this),r.removeEvent(t,"touchend",this),r.removeEvent(t,r.prefixPointerEvent("pointerup"),this),r.removeEvent(t,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(e){var i=e.touches?e.touches[0]:e;
e.preventDefault(),e.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=i.pageX,this.lastPointY=i.pageY,this.startTime=r.getTime(),this.options.disableTouch||r.addEvent(t,"touchmove",this),this.options.disablePointer||r.addEvent(t,r.prefixPointerEvent("pointermove"),this),this.options.disableMouse||r.addEvent(t,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(t){{var e,i,s,o,n=t.touches?t.touches[0]:t;r.getTime()}this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,e=n.pageX-this.lastPointX,this.lastPointX=n.pageX,i=n.pageY-this.lastPointY,this.lastPointY=n.pageY,s=this.x+e,o=this.y+i,this._pos(s,o),t.preventDefault(),t.stopPropagation()},_end:function(e){if(this.initiated){if(this.initiated=!1,e.preventDefault(),e.stopPropagation(),r.removeEvent(t,"touchmove",this),r.removeEvent(t,r.prefixPointerEvent("pointermove"),this),r.removeEvent(t,"mousemove",this),this.scroller.options.snap){var s=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),o=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.scroller.x-s.x),1e3),i.min(i.abs(this.scroller.y-s.y),1e3)),300);(this.scroller.x!=s.x||this.scroller.y!=s.y)&&(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=s,this.scroller.scrollTo(s.x,s.y,o,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(t){t=t||0,this.indicatorStyle[r.style.transitionDuration]=t+"ms",!t&&r.isBadAndroid&&(this.indicatorStyle[r.style.transitionDuration]="0.001s")},transitionTimingFunction:function(t){this.indicatorStyle[r.style.transitionTimingFunction]=t},refresh:function(){this.transitionTime(),this.indicatorStyle.display=this.options.listenX&&!this.options.listenY?this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.scroller.hasVerticalScroll?"block":"none":this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(r.addClass(this.wrapper,"iScrollBothScrollbars"),r.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(r.removeClass(this.wrapper,"iScrollBothScrollbars"),r.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=i.max(i.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=i.max(i.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var t=this.options.listenX&&i.round(this.sizeRatioX*this.scroller.x)||0,e=this.options.listenY&&i.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(t<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=i.max(this.indicatorWidth+t,8),this.indicatorStyle.width=this.width+"px"),t=this.minBoundaryX):t>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=i.max(this.indicatorWidth-(t-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",t=this.maxPosX+this.indicatorWidth-this.width):t=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),e<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=i.max(this.indicatorHeight+3*e,8),this.indicatorStyle.height=this.height+"px"),e=this.minBoundaryY):e>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=i.max(this.indicatorHeight-3*(e-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",e=this.maxPosY+this.indicatorHeight-this.height):e=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=t,this.y=e,this.scroller.options.useTransform?this.indicatorStyle[r.style.transform]="translate("+t+"px,"+e+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=t+"px",this.indicatorStyle.top=e+"px")},_pos:function(t,e){0>t?t=0:t>this.maxPosX&&(t=this.maxPosX),0>e?e=0:e>this.maxPosY&&(e=this.maxPosY),t=this.options.listenX?i.round(t/this.sizeRatioX):this.scroller.x,e=this.options.listenY?i.round(e/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(t,e)},fade:function(t,e){if(!e||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var i=t?250:500,s=t?0:300;t=t?"1":"0",this.wrapperStyle[r.style.transitionDuration]=i+"ms",this.fadeTimeout=setTimeout(function(t){this.wrapperStyle.opacity=t,this.visible=+t}.bind(this,t),s)}}},s.utils=r,"undefined"!=typeof module&&module.exports?module.exports=s:t.IScroll=s}(window,document,Math),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(){var e=this;e.top="auto",e.left="auto",e.right="auto",e.bottom="auto",e.set=function(i,s){t.isNumeric(s)&&(e[i]=Math.round(s))}}function i(t,e,i){function s(s,o){a(),t.data(g)||(s?(o&&t.data(v,!0),i.showTip(t)):(E.tipOpenImminent=!0,l=setTimeout(function(){l=null,n()},e.intentPollInterval)))}function o(s){a(),E.tipOpenImminent=!1,t.data(g)&&(t.data(v,!1),s?i.hideTip(t):(E.delayInProgress=!0,l=setTimeout(function(){l=null,i.hideTip(t),E.delayInProgress=!1},e.closeDelay)))}function n(){var o=Math.abs(E.previousX-E.currentX),n=Math.abs(E.previousY-E.currentY),a=o+n;a<e.intentSensitivity?i.showTip(t):(E.previousX=E.currentX,E.previousY=E.currentY,s())}function a(){l=clearTimeout(l),E.delayInProgress=!1}function r(){i.resetPosition(t)}var l=null;this.show=s,this.hide=o,this.cancel=a,this.resetPosition=r}function s(){function t(t,o,a,r,l){var h,c=o.split("-")[0],p=new e;switch(h=n(t)?s(t,c):i(t,c),o){case"n":p.set("left",h.left-a/2),p.set("bottom",E.windowHeight-h.top+l);break;case"e":p.set("left",h.left+l),p.set("top",h.top-r/2);break;case"s":p.set("left",h.left-a/2),p.set("top",h.top+l);break;case"w":p.set("top",h.top-r/2),p.set("right",E.windowWidth-h.left+l);break;case"nw":p.set("bottom",E.windowHeight-h.top+l),p.set("right",E.windowWidth-h.left-20);break;case"nw-alt":p.set("left",h.left),p.set("bottom",E.windowHeight-h.top+l);break;case"ne":p.set("left",h.left-20),p.set("bottom",E.windowHeight-h.top+l);break;case"ne-alt":p.set("bottom",E.windowHeight-h.top+l),p.set("right",E.windowWidth-h.left);break;case"sw":p.set("top",h.top+l),p.set("right",E.windowWidth-h.left-20);break;case"sw-alt":p.set("left",h.left),p.set("top",h.top+l);break;case"se":p.set("left",h.left-20),p.set("top",h.top+l);break;case"se-alt":p.set("top",h.top+l),p.set("right",E.windowWidth-h.left)}return p}function i(t,e){var i,s,o=t.offset(),n=t.outerWidth(),a=t.outerHeight();switch(e){case"n":i=o.left+n/2,s=o.top;break;case"e":i=o.left+n,s=o.top+a/2;break;case"s":i=o.left+n/2,s=o.top+a;break;case"w":i=o.left,s=o.top+a/2;break;case"nw":i=o.left,s=o.top;break;case"ne":i=o.left+n,s=o.top;break;case"sw":i=o.left,s=o.top+a;break;case"se":i=o.left+n,s=o.top+a}return{top:s,left:i}}function s(t,e){function i(){m.push(h.matrixTransform(p))}var s,o,n,a,r=t.closest("svg")[0],l=t[0],h=r.createSVGPoint(),c=l.getBBox(),p=l.getScreenCTM(),d=c.width/2,u=c.height/2,m=[],f=["nw","n","ne","e","se","s","sw","w"];if(h.x=c.x,h.y=c.y,i(),h.x+=d,i(),h.x+=d,i(),h.y+=u,i(),h.y+=u,i(),h.x-=d,i(),h.x-=d,i(),h.y-=u,i(),m[0].y!==m[1].y||m[0].x!==m[7].x)for(o=Math.atan2(p.b,p.a)*T,n=Math.ceil((o%360-22.5)/45),1>n&&(n+=8);n--;)f.push(f.shift());for(a=0;a<m.length;a++)if(f[a]===e){s=m[a];break}return{top:s.y+E.scrollTop,left:s.x+E.scrollLeft}}this.compute=t}function o(i){function o(t){t.data(g,!0),T.queue(function(e){n(t),e()})}function n(t){var e;if(t.data(g)){if(E.isTipOpen)return E.isClosing||a(E.activeHover),void T.delay(100).queue(function(e){n(t),e()});t.trigger("powerTipPreRender"),e=h(t),e&&(T.empty().append(e),t.trigger("powerTipRender"),E.activeHover=t,E.isTipOpen=!0,T.data(y,i.mouseOnToPopup),i.followMouse?r():(w(t),E.isFixedTipOpen=!0),T.fadeIn(i.fadeInTime,function(){E.desyncTimeout||(E.desyncTimeout=setInterval(S,500)),t.trigger("powerTipOpen")}))}}function a(t){E.isClosing=!0,E.activeHover=null,E.isTipOpen=!1,E.desyncTimeout=clearInterval(E.desyncTimeout),t.data(g,!1),t.data(v,!1),T.fadeOut(i.fadeOutTime,function(){var s=new e;E.isClosing=!1,E.isFixedTipOpen=!1,T.removeClass(),s.set("top",E.currentY+i.offset),s.set("left",E.currentX+i.offset),T.css(s),t.trigger("powerTipClose")})}function r(){if(!E.isFixedTipOpen&&(E.isTipOpen||E.tipOpenImminent&&T.data(b))){var t,s,o=T.outerWidth(),n=T.outerHeight(),a=new e;a.set("top",E.currentY+i.offset),a.set("left",E.currentX+i.offset),t=c(a,o,n),t!==P.none&&(s=p(t),1===s?t===P.right?a.set("left",E.windowWidth-o):t===P.bottom&&a.set("top",E.scrollTop+E.windowHeight-n):(a.set("left",E.currentX-o-i.offset),a.set("top",E.currentY-n-i.offset))),T.css(a)}}function w(e){var s,o;i.smartPlacement?(s=t.fn.powerTip.smartPlacementLists[i.placement],t.each(s,function(t,i){var s=c(x(e,i),T.outerWidth(),T.outerHeight());return o=i,s===P.none?!1:void 0})):(x(e,i.placement),o=i.placement),T.addClass(o)}function x(t,s){var o,n,a=0,r=new e;r.set("top",0),r.set("left",0),T.css(r);do o=T.outerWidth(),n=T.outerHeight(),r=k.compute(t,s,o,n,i.offset),T.css(r);while(++a<=5&&(o!==T.outerWidth()||n!==T.outerHeight()));return r}function S(){var t=!1;!E.isTipOpen||E.isClosing||E.delayInProgress||(E.activeHover.data(g)===!1||E.activeHover.is(":disabled")?t=!0:l(E.activeHover)||E.activeHover.is(":focus")||E.activeHover.data(v)||(T.data(y)?l(T)||(t=!0):t=!0),t&&a(E.activeHover))}var k=new s,T=t("#"+i.popupId);0===T.length&&(T=t("<div/>",{id:i.popupId}),0===m.length&&(m=t("body")),m.append(T)),i.followMouse&&(T.data(b)||(d.on("mousemove",r),u.on("scroll",r),T.data(b,!0))),i.mouseOnToPopup&&T.on({mouseenter:function(){T.data(y)&&E.activeHover&&E.activeHover.data(f).cancel()},mouseleave:function(){E.activeHover&&E.activeHover.data(f).hide()}}),this.showTip=o,this.hideTip=a,this.resetPosition=w}function n(t){return window.SVGElement&&t[0]instanceof SVGElement}function a(){E.mouseTrackingActive||(E.mouseTrackingActive=!0,t(function(){E.scrollLeft=u.scrollLeft(),E.scrollTop=u.scrollTop(),E.windowWidth=u.width(),E.windowHeight=u.height()}),d.on("mousemove",r),u.on({resize:function(){E.windowWidth=u.width(),E.windowHeight=u.height()},scroll:function(){var t=u.scrollLeft(),e=u.scrollTop();t!==E.scrollLeft&&(E.currentX+=t-E.scrollLeft,E.scrollLeft=t),e!==E.scrollTop&&(E.currentY+=e-E.scrollTop,E.scrollTop=e)}}))}function r(t){E.currentX=t.pageX,E.currentY=t.pageY}function l(t){var e=t.offset(),i=t[0].getBoundingClientRect(),s=i.right-i.left,o=i.bottom-i.top;return E.currentX>=e.left&&E.currentX<=e.left+s&&E.currentY>=e.top&&E.currentY<=e.top+o}function h(e){var i,s,o=e.data(x),n=e.data(S),a=e.data(k);return o?(t.isFunction(o)&&(o=o.call(e[0])),s=o):n?(t.isFunction(n)&&(n=n.call(e[0])),n.length>0&&(s=n.clone(!0,!0))):a&&(i=t("#"+a),i.length>0&&(s=i.html())),s}function c(t,e,i){var s=E.scrollTop,o=E.scrollLeft,n=s+E.windowHeight,a=o+E.windowWidth,r=P.none;return(t.top<s||Math.abs(t.bottom-E.windowHeight)-i<s)&&(r|=P.top),(t.top+i>n||Math.abs(t.bottom-E.windowHeight)>n)&&(r|=P.bottom),(t.left<o||t.right+e>a)&&(r|=P.left),(t.left+e>a||t.right<o)&&(r|=P.right),r}function p(t){for(var e=0;t;)t&=t-1,e++;return e}var d=t(document),u=t(window),m=t("body"),f="displayController",g="hasActiveHover",v="forcedOpen",b="hasMouseMove",y="mouseOnToPopup",w="originalTitle",x="powertip",S="powertipjq",k="powertiptarget",T=180/Math.PI,E={isTipOpen:!1,isFixedTipOpen:!1,isClosing:!1,tipOpenImminent:!1,activeHover:null,currentX:0,currentY:0,previousX:0,previousY:0,desyncTimeout:null,mouseTrackingActive:!1,delayInProgress:!1,windowWidth:0,windowHeight:0,scrollTop:0,scrollLeft:0},P={none:0,top:1,bottom:2,left:4,right:8};t.fn.powerTip=function(e,s){if(!this.length)return this;if("string"===t.type(e)&&t.powerTip[e])return t.powerTip[e].call(this,this,s);var n=t.extend({},t.fn.powerTip.defaults,e),r=new o(n);return a(),this.each(function(){var e,s=t(this),o=s.data(x),a=s.data(S),l=s.data(k);s.data(f)&&t.powerTip.destroy(s),e=s.attr("title"),o||l||a||!e||(s.data(x,e),s.data(w,e),s.removeAttr("title")),s.data(f,new i(s,n,r))}),n.manual||this.on({"mouseenter.powertip":function(e){t.powerTip.show(this,e)},"mouseleave.powertip":function(){t.powerTip.hide(this)},"focus.powertip":function(){t.powerTip.show(this)},"blur.powertip":function(){t.powerTip.hide(this,!0)},"keydown.powertip":function(e){27===e.keyCode&&t.powerTip.hide(this,!0)}}),this},t.fn.powerTip.defaults={fadeInTime:200,fadeOutTime:100,followMouse:!1,popupId:"powerTip",intentSensitivity:7,intentPollInterval:100,closeDelay:100,placement:"n",smartPlacement:!1,offset:10,mouseOnToPopup:!1,manual:!1},t.fn.powerTip.smartPlacementLists={n:["n","ne","nw","s"],e:["e","ne","se","w","nw","sw","n","s","e"],s:["s","se","sw","n"],w:["w","nw","sw","e","ne","se","n","s","w"],nw:["nw","w","sw","n","s","se","nw"],ne:["ne","e","se","n","s","sw","ne"],sw:["sw","w","nw","s","n","ne","sw"],se:["se","e","ne","s","n","nw","se"],"nw-alt":["nw-alt","n","ne-alt","sw-alt","s","se-alt","w","e"],"ne-alt":["ne-alt","n","nw-alt","se-alt","s","sw-alt","e","w"],"sw-alt":["sw-alt","s","se-alt","nw-alt","n","ne-alt","w","e"],"se-alt":["se-alt","s","sw-alt","ne-alt","n","nw-alt","e","w"]},t.powerTip={show:function(e,i){return i?(r(i),E.previousX=i.pageX,E.previousY=i.pageY,t(e).data(f).show()):t(e).first().data(f).show(!0,!0),e},reposition:function(e){return t(e).first().data(f).resetPosition(),e},hide:function(e,i){return e?t(e).first().data(f).hide(i):E.activeHover&&E.activeHover.data(f).hide(!0),e},destroy:function(e){return t(e).off(".powertip").each(function(){var e=t(this),i=[w,f,g,v];e.data(w)&&(e.attr("title",e.data(w)),i.push(x)),e.removeData(i)}),e}},t.powerTip.showTip=t.powerTip.show,t.powerTip.closeTip=t.powerTip.hide}),function(t){function e(t){return t.charAt(0).toUpperCase()+t.slice(1)}function i(){this.rooms=null!==dataReg?dataReg.roomData:null,this.seatLimit=seatLimit,this.currentRoom=0,this.css3=!1,this.ie8=!1,this.mobileview=!0,this.bronSeats=null,this.openSeats=null,this.seatsTotal=null,this.takenSeats=null,this.locationObj={},this.selectedSeats=[],this.customF=[],this.gmailNeeded=gmail,this.status=regTime,this.spotName=v.translate("seat"),this.emailConfirmEnabled=emailConfirmRequired,this.payPalEnabled="1"===payPalEnabled?!0:!1,this.payPalCurrencyCode=this.payPalEnabled?payPalCurrencyCode:"",this.enteredSeatPasswords={}}function s(t,e,i,s,o){this.id=t,this.nr=e,this.room=i,this.roomUUID=s,this.defFields=["FirstName","LastName","Email"],this.customFields=[],this.price=o}function o(){new Date-w<S?setTimeout(o,S):(x=!1,b=t(window).width(),y=t(window).height(),b>1024?(X.mobileview=!1,t("#room-nav").hasClass("modal")&&(t("#room-nav").removeClass("modal"),t("#modal-bg").css("display","none"))):X.mobileview=!0,n(X.rooms[X.currentRoom].room.width,X.rooms[X.currentRoom].room.height),null!=T&&(T.destroy(),T=null),a())}function n(e,i){var s=t("#room-nav-wrap").outerHeight(!0),o=t(".top-info-bar").outerHeight(!0)||0,n=t("#seat-cart").outerWidth(!0),a=b-20,l=y-30-30-s-20,h=!1,c=!1;if(t("#middle-section").css("margin-left",""),b>=1024){var p=0;t("#legend-wrapper").is(":visible")?(p=t("#legend-wrapper").outerWidth(!0),p>n?(t("#seat-cart").css("margin-left",p-n+10),n=t("#seat-cart").outerWidth(!0)):(t("#legend-wrapper").css("margin-right",n-p+5),p=t("#legend-wrapper").outerWidth(!0)),a=a-p-n-20):a-=2*n,l=y-30-s-o-30,X.rooms[X.currentRoom].room.legends.length>0&&t("#legend-wrapper").css("display","inline-block")}else t("#box-wrap").css("width",a-20);t("#boxes").removeAttr("style"),e>a?(h=!0,t("#box-wrap").css("width",a-20),t("#boxes").css("width",e+15)):t("#box-wrap, #boxes").css("width",e),i>l?(c=!0,t("#box-wrap").css("height",l),t("#boxes").css("height",i+15)):t("#box-wrap, #boxes").css("height",i),1024>b&&t("#legend-wrapper").css("display","none"),t("#box-wrap").attr("data-sec-size",t("#box-wrap").css("width")),r(h,c)}function a(){1024>b?0==X.ie8:t("#legend-wrapper").css("max-height","")}function r(){null!=k&&(k.destroy(),k=null);var e=!1;if((X.rooms[X.currentRoom].room.width>t("#middle-section").width()||X.rooms[X.currentRoom].room.height>t("#middle-section").height())&&(e=!0),null==k&&0==X.ie8){if(k=new IScroll("#box-wrap",{keyBindings:!0,scrollbars:!0,scrollX:!0,scrollY:!0,bounce:!1,tap:!0,click:!0,interactiveScrollbars:!0,freeScroll:!0,zoom:!0,zoomMax:30,zoomMin:.1,mouseWheelSpeed:20}),e){var i=l();k.zoom(i)}t("#boxes").css({cursor:"all-scroll"})}}function l(){var e=X.rooms[X.currentRoom].room.width/(t("#middle-section").width()-20),i=X.rooms[X.currentRoom].room.height/(t("#middle-section").height()-20),s=Math.max(e,i);return 1/s}function h(t){var e=/^\S+@\S+$/,i=/^[a-z0-9](\.?[a-z0-9]){2,}@g(oogle)?mail\.com$/,s=new RegExp("^[\\p{L}1234567890]{1,"+WP_Seatreg.SEATREG_CUSTOM_TEXT_FIELD_MAX_LENGTH+"}$","u"),o=new RegExp("^[\\p{L}1234567890]{1,100}$","u"),n=t.val();if(""==n)return t.next().text(v.translate("emptyField")).css("display","block"),!1;switch(t.attr("data-field")){case"FirstName":if(t.next().text("").css("display","inline"),!o.test(n))return t.next().text(v.translate("illegalCharactersDetec")).css("display","block"),!1;break;case"LastName":if(t.next().css("display","none"),!o.test(n))return t.next().text(v.translate("illegalCharactersDetec")).css("display","block"),!1;break;case"Email":var a=e;if(1==X.gmailNeeded&&(a=i),!a.test(n))return t.next().text(v.translate("emailNotCorrect")).css("display","block"),!1;t.next().css("display","none");break;default:var r=t.attr("data-type");if("text"===r||"sel"===r){if(!s.test(n))return t.next().text(v.translate("illegalCharactersDetec")).css("display","block"),!1;t.next().css("display","none")}}return!0}function c(t,e){this.label=t,this.value=e}function p(){var e=[];return t("#checkout-input-area .check-item").each(function(){var i=[];t(this).find(".custom-input").each(function(){var e=t(this).find(".field-input").attr("data-type");"text"==e?i.push(new c(t(this).attr("data-label"),t(this).find(".field-input").val())):"check"==e?i.push(new c(t(this).attr("data-label"),t(this).find(".field-input").is(":checked")?"1":"0")):"sel"==e&&i.push(new c(t(this).attr("data-label"),t(this).find(".field-input").find(":selected").val()))}),e.push(i)}),e}function d(e,i){t("#checkout-confirm-btn").css("display","none"),t("#checkoput-area-inner .ajax-load").css("display","inline-block");var s=null,o=(X.enteredSeatPasswords,JSON.stringify(X.enteredSeatPasswords));s=X.selectedSeats.length>1?t("#prim-mail").val():t("#checkout-input-area .check-item").first().find('.field-input[data-field="Email"]').val(),e=JSON.stringify(e),t.ajax({type:"POST",url:ajaxUrl,data:t("#checkoput-area-inner").serialize()+"&custom="+encodeURIComponent(e)+"&action=seatreg_booking_submit&c="+i+"&em="+s+"&pw="+t("#sub-pwd").val()+"&passwords="+encodeURIComponent(o),success:function(e){t("#checkoput-area-inner .ajax-load").css("display","none");var i=!0;try{var o=t.parseJSON(e)}catch(n){i=!1}i?"ok"==o.type&&"mail"==o.text?(t("#email-send").text(s),u()):"ok"==o.type&&"bookings-confirmed-status-2"==o.text?m(o.data,2):"ok"==o.type&&"bookings-confirmed-status-1"==o.text?m(o.data,1):"error"==o.type&&"Wrong captcha"==o.text?(t("#captcha-img").replaceWith(o.data),t("#request-error").text(v.translate("wrongCaptcha")).css("display","block"),t("#checkout-confirm-btn").css("display","inline-block")):"error"==o.type?(t("#checkout-area").css("display","none"),t("#captcha-ref").click(),t("#error-text").html(o.text),t("#error").css("display","block"),t("#checkout-confirm-btn").css("display","inline-block")):"validation-error"==o.type?(t("#captcha-ref").click(),t("#checkout-confirm-btn").css("display","inline-block"),t("#request-error").text(o.text).css("display","block")):(t("#error-text").text(v.translate("somethingWentWrong")),t("#error").css("display","block"),t("#checkout-confirm-btn").css("display","inline-block")):(t("#checkout-area").css("display","none"),t("#error-inner").prepend(v.translate("somethingWentWrong")),t("#error").css("display","block"),t("#checkout-confirm-btn").css("display","inline-block"))},error:function(e){t("#checkout-confirm-btn").css("display","inline-block"),alert(0===e.status?"Not connect.\n Verify Network.":404==e.status?"Requested page not found. [404]":500==e.status?"Internal Server Error [500].":"timeout"===exception?"Time out error.":"abort"===exception?"Ajax request aborted.":"Uncaught Error.\n"+e.responseText)}})}function u(){t("#checkout-area").css("display","none"),t("#email-conf").css("display","block")}function m(e,i){if(t(".booking-check-url").text(e).attr("href",e),t("#checkout-area").css("display","none"),t("#bookings-confirmed").css("display","block"),1===i){var s=parseInt(t("#booking-total-price").attr("data-booking-price"));t(".booking-confirmed-header").text(v.translate("bookingsConfirmedPending")),"1"===window.payPalEnabled&&s>0&&t("#booking-confirmed-text").text(v.translate("payForBookingLink"))}else 2===i&&(t("#should-receive-update-email-text").css("display","none"),"1"===window.receiptEnabled?t(".booking-confirmed-header").html(v.translate("bookingsConfirmed")+"<br>"+v.translate("receiptSent")):t(".booking-confirmed-header").text(v.translate("bookingsConfirmed")))}function f(t,e){null!=k&&(0==P?k.zoom(k.scale-.2,t,e,600):k.zoom(k.scale-.2,t,e,600))}function g(t,e){null!=k&&(0==P?k.zoom(k.scale+.2,t,e,600):k.zoom(k.scale+.2,t,e,600))}var v={translate:function(t){return seatregTranslations&&seatregTranslations.hasOwnProperty(t)?seatregTranslations[t]:void 0}};t(".time").each(function(){var e=new Date(parseInt(t(this).text()));t(this).text(e.format("d.M.Y H:i"))});var b=t(window).width(),y=t(window).height(),w=new Date(1,1,2e3,12,0,0),x=!1,S=200,k=null,T=null,E=window.navigator.userAgent,P=E.indexOf("MSIE ");Object.size=function(t){var e,i=0;for(e in t)t.hasOwnProperty(e)&&i++;return i};var Y=function(t){if(""==t)return{};for(var e={},i=0;i<t.length;++i){var s=t[i].split("=");2==s.length&&(e[s[0]]=decodeURIComponent(s[1].replace(/\+/g," ")))}return e}(window.location.search.substr(1).split("&"));i.prototype.browserInfo=function(){t("html").hasClass("csstransitions")?this.css3=!0:t("#zoom-controller").css({display:"none"}),document.addEventListener||(this.ie8=!0,t("#box-wrap").css("overflow","auto")),b>=1024&&(this.mobileview=!1)},i.prototype.fillLocationObj=function(){for(var t=this.rooms.length,e=0;t>e;e++)this.locationObj[this.rooms[e].room.uuid]=e},i.prototype.fillCustom=function(t){this.customF=t},i.prototype.init=function(){this.bronSeats=roomsInfo.bronSeats,this.openSeats=roomsInfo.openSeats,this.seatsTotal=roomsInfo.seatsTotal,this.takenSeats=roomsInfo.takenSeats;for(var e in roomsInfo.roomsInfo)if(roomsInfo.roomsInfo.hasOwnProperty(e)){var i=this.locationObj[roomsInfo.roomsInfo[e].roomUuid];this.rooms[i].room.roomBronSeats=roomsInfo.roomsInfo[e].roomBronSeats,this.rooms[i].room.roomCustomBoxes=roomsInfo.roomsInfo[e].roomCustomBoxes,this.rooms[i].room.roomOpenSeats=roomsInfo.roomsInfo[e].roomOpenSeats,this.rooms[i].room.roomSeatsTotal=roomsInfo.roomsInfo[e].roomSeatsTotal,this.rooms[i].room.roomTakenSeats=roomsInfo.roomsInfo[e].roomTakenSeats}for(var s=Object.size(registrations),o=0;s>o;o++){var a=registrations[o].hasOwnProperty("custom_field_data")?registrations[o].custom_field_data:"[]",r=registrations[o].hasOwnProperty("reg_name")?registrations[o].reg_name:null;X.addRegistration(registrations[o].seat_id,registrations[o].room_uuid,registrations[o].status,r,a)}null!=custF&&X.fillCustom(custF),t(".total-rooms").text(roomsInfo.roomCount),t(".total-open").text(roomsInfo.openSeats),t(".total-bron").text(roomsInfo.bronSeats),t(".total-tak").text(roomsInfo.takenSeats),this.mobileview?(X.paintRoomsNav(),X.paintRoomInfo(),n(X.rooms[X.currentRoom].room.width,X.rooms[X.currentRoom].room.height),X.paintRoomLegends(),X.paintRoom()):(X.paintRoomsNav(),X.paintRoomInfo(),X.paintRoomLegends(),n(X.rooms[X.currentRoom].room.width,X.rooms[X.currentRoom].room.height),X.paintRoom())},i.prototype.getRoomNameFromLayout=function(t){for(var e=this.rooms.length,i=null,s=0;e>s;s++)if(this.rooms[s].room.uuid===t){i=this.rooms[s].room.name;break}return i},i.prototype.addRegistration=function(t,e,i,s,o){for(var n=this.locationObj[e],a=this.rooms[n].boxes.length,r=0;a>r;r++)if(this.rooms[n].boxes[r].id==t){this.rooms[n].boxes[r].status=1==i?"bronRegister":"takenRegister",null!=s&&(this.rooms[n].boxes[r].registrantName=s),this.rooms[n].boxes[r].customFieldData=JSON.parse(o);break}},i.prototype.paintRoom=function(){var e=document.createDocumentFragment(),i=this.rooms[this.currentRoom].boxes,s=i.length,o=this,n=document.getElementById("box-wrap"),a=document.getElementById("room-is-empty");n.classList.remove("dont-display"),a.classList.add("dont-display"),0===s&&(n.classList.add("dont-display"),a.classList.remove("dont-display"));for(var r=0;s>r;r++){var l=document.createElement("div");l.className="box";var h="",c=i[r].legend,p=!1;if(l.style.top=i[r].yPosition+"px",l.style.left=i[r].xPosition+"px",l.style.backgroundColor=i[r].color,l.style.zIndex=i[r].zIndex,l.style.width=i[r].width+"px",l.style.height=i[r].height+"px","text-box"===i[r].type&&(l.className=l.className+" text-box",l.style.color=i[r].fontColor,l.style.fontSize=i[r].inputSize+"px",l.style.pointerEvents="none",l.innerHTML=i[r].input),"noLegend"!==c&&(l.setAttribute("data-legend",c),l.setAttribute("data-leg",c.replace(/\s+/g,"_").toLowerCase()),h='<div class="seatreg-tooltip-row">'+c+"</div>",p=!0),"true"==i[r].canRegister){l.setAttribute("data-seat",i[r].id),l.setAttribute("data-seat-nr",i[r].seat);var d=document.createElement("div");d.className="seat-number";var u=document.createTextNode(i[r].seat);d.appendChild(u),l.appendChild(d),p=!0}if("nohover"!==i[r].hoverText){h+='<div class="seatreg-tooltip-row">'+i[r].hoverText.replace(/\^/g,"<br>")+"</div>",l.className=l.className+" bubble-text",p=!0;var m=document.createElement("i");m.className=" fa fa-comment-o comment-icon",l.appendChild(m)}if("noStatus"!==i[r].status){if("bronRegister"==i[r].status){l.setAttribute("data-status","bron");var f=document.createElement("div");f.className="bron-sign",h+='<div class="seatreg-tooltip-row">'+v.translate("Pending")+"</div>",l.appendChild(f)}else if("takenRegister"==i[r].status){l.setAttribute("data-status","tak");var g=document.createElement("div");g.className="taken-sign",h+='<div class="seatreg-tooltip-row">'+v.translate("Booked")+"</div>",l.appendChild(g)}p=!0}i[r].hasOwnProperty("registrantName")&&(h+='<div class="seatreg-tooltip-row">'+i[r].registrantName+"</div>"),i[r].hasOwnProperty("customFieldData")&&this.customF.forEach(function(t){var e=i[r].customFieldData.find(function(e){return e.label===t.label});if(e){var s=e.value;"check"===t.type&&(s=v.translate("1"===s?"yes":"no")),h+='<div class="seatreg-tooltip-row">'+e.label+": "+s+"</div>"}}),i[r].hasOwnProperty("price")&&l.setAttribute("data-price",i[r].price),i[r].hasOwnProperty("lock")&&l.setAttribute("data-lock",i[r].lock),i[r].hasOwnProperty("password")&&l.setAttribute("data-password",i[r].password),h&&l.setAttribute("data-powertip",h),p&&(l.className=l.className+" cursor"),this.ie8?l.attachEvent("onclick",function(t){var t=t||window.event,e=t.target||t.srcElement;o.openSeatDialog(e)}):l.addEventListener("tap",function(){o.openSeatDialog(this)},!1),e.appendChild(l)}for(var b=this.selectedSeats.length,y=this.rooms[this.currentRoom].room.name,r=0;b>r;r++)this.selectedSeats[r].room==y&&e.querySelector('.box[data-seat="'+this.selectedSeats[r].id+'"]').setAttribute("data-selectedbox","true");document.getElementById("boxes").appendChild(e),null!==this.rooms[this.currentRoom].room.backgroundImage&&-1!==this.rooms[this.currentRoom].room.backgroundImage.indexOf(".")&&t("#boxes").append('<img class="room-image" src="'+seatregPluginFolder+"uploads/room_images/"+Y.c+"/"+this.rooms[this.currentRoom].room.backgroundImage+'" />'),t("#boxes .box[data-powertip]").powerTip({followMouse:!0,fadeInTime:0,fadeOutTime:0,intentPollInterval:10})},i.prototype.paintRoomInfo=function(){t("#current-room-name").text(this.rooms[this.currentRoom].room.name);var e=this.rooms[this.currentRoom].room,i=t(document.createDocumentFragment());i.append('<div class="info-item open-seats"><span>'+v.translate("openSeatsInRoom_")+"</span>"+e.roomOpenSeats+"</div>",'<div class="info-item"><span class="bron-legend"></span> <span>'+v.translate("pendingSeatInRoom_")+"</span>"+e.roomBronSeats+"</div>",'<div class="info-item"><span class="tak-legend"></span> <span>'+v.translate("confirmedSeatInRoom_")+"</span>"+e.roomTakenSeats+"</div>"),t("#room-nav-info-inner").html(i)},i.prototype.paintRoomLegends=function(){t("#legends").empty();var e=this.rooms[this.currentRoom].room.legends.length;e>0?this.mobileview?t("#legend-wrapper").css("display","none"):t("#legend-wrapper").css("display","inline-block"):t("#legend-wrapper, .mobile-legend").css("display","none");for(var i=t(document.createDocumentFragment()),s=0;e>s;s++)i.append(t('<div class="legend-div" data-target-legend='+this.rooms[this.currentRoom].room.legends[s].text.replace(/\s+/g,"_").toLowerCase()+"></div>").append('<div class="legend-box" style="background-color:'+this.rooms[this.currentRoom].room.legends[s].color+'"></div>','<div class="legend-name">'+this.rooms[this.currentRoom].room.legends[s].text+"</div>"));t("#legends").append(i),t("#legends .legend-div").on("click",function(){var e=t(this).data("target-legend"),i=t("#boxes .box[data-leg="+e+"]");i.css("--animationColor",i.css("background-color")),i.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){t(this).removeClass("legend-animation")}),i.addClass("legend-animation")}),a()},i.prototype.paintRoomsNav=function(){for(var e=this.rooms.length,i=t(document.createDocumentFragment()),s=this,o=0;e>o;o++){var n=this.rooms[o].room.name,a=t("<div>",{"class":"room-nav-link","data-open":this.rooms[o].room.uuid}).html(n).on("click",function(){s.roomChange(t(this).attr("data-open"))});X.currentRoom==o&&a.addClass("active-nav-link"),a.appendTo(i)}t("#room-nav-items").append(i)},i.prototype.roomChange=function(e){t("#room-nav").removeClass("modal"),t("#modal-bg").css("display","none"),this.currentRoom=this.locationObj[e],null!=k&&(k.destroy(),k=null),null!=T&&(T.destroy(),T=null),t("#room-nav-items .active-nav-link").removeClass("active-nav-link"),t("#room-nav-items").find(".room-nav-link[data-open="+e+"]").addClass("active-nav-link"),t("#boxes").empty(),t("#legends").empty(),this.mobileview<=1024?(this.paintRoomLegends(),this.paintRoomInfo(),n(this.rooms[this.currentRoom].room.width,this.rooms[this.currentRoom].room.height)):(this.paintRoomLegends(),this.paintRoomInfo(),n(this.rooms[this.currentRoom].room.width,this.rooms[this.currentRoom].room.height)),this.paintRoom()
},i.prototype.addSeatToCart=function(){var e=document.getElementById("selected-seat").value,i=document.getElementById("selected-seat-nr").value,o=document.getElementById("selected-seat-room").value,n=document.getElementById("selected-room-uuid").value,a=parseInt(document.getElementById("selected-seat-price").value),r=this;this.selectedSeats.push(new s(e,i,o,n,a)),t(".seats-in-cart").text(this.selectedSeats.length);var l=t('#boxes .box[data-seat="'+e+'"]').css("background-color");t('#boxes .box[data-seat="'+e+'"]').attr("data-selectedBox","true").css("--animationColor",l);var h=t('<div class="cart-item" data-cart-id="'+e+'" data-room-uuid="'+n+'"></div>'),c=t('<div class="cart-item-nr">'+i+"</div>"),p=t('<div class="cart-item-room">'+o+"</div>"),d=t('<div class="remove-cart-item"><i class="fa fa-times-circle"></i><span style="padding-left:4px">'+v.translate("remove")+"</span></div>").on("click",function(){for(var e=t(this).closest(".cart-item"),i=e.attr("data-cart-id"),s=0,o=r.selectedSeats.length,n=0;o>n;n++)if(r.selectedSeats[n].id==i){s=r.selectedSeats[n].price,r.selectedSeats.splice(n,1);break}if(e.remove(),t('#boxes .box[data-seat="'+i+'"]').removeAttr("data-selectedbox"),0==r.selectedSeats.length)t("#seat-cart-info").html("<h3>"+v.translate("selectionIsEmpty")+"</h3><p>"+v.translate("youCanAdd_")+r.spotName+v.translate("_toCartClickTab")+"</p>"),t("#checkout").css("display","none"),t("#seat-cart-rows").css("display","none"),t("#booking-total-price").empty().attr("data-booking-price",0);else{var a,l=r.selectedSeats.length;a=l>1?l+v.translate("_seatsSelected"):l+v.translate("_seatSelected"),t("#seat-cart-info").text(a);var h=r.selectedSeats.reduce(function(t,e){return e.price+t},0);t("#booking-total-price").text(v.translate("bookingTotalCostIs_")+h+" "+r.payPalCurrencyCode),t("#booking-total-price").attr("data-booking-price",h)}t(".seats-in-cart").text(r.selectedSeats.length)});h.append(c,p,d),t("#seat-cart-items").append(h);var u=r.selectedSeats.reduce(function(t,e){return e.price+t},0);t("#booking-total-price").text(v.translate("bookingTotalCostIs_")+u+" "+r.payPalCurrencyCode),t("#booking-total-price").attr("data-booking-price",u),this.closeSeatDialog()},i.prototype.openSeatCart=function(){var e=this.selectedSeats.length;if(0==e)"run"==this.status?(t("#seat-cart-info").html("<h3>"+v.translate("selectionIsEmpty")+"</h3><p>"+v.translate("selectingGuide")+"</p>"),t("#checkout").css("display","none"),t("#seat-cart-rows").css("display","none")):t("#seat-cart-info").html("<h3>"+v.translate("regClosedAtMoment")+"</h3>");else{t("#seat-cart-rows").css("display","block");var i;i=e>1?e+v.translate("_seatsSelected"):e+v.translate("_seatSelected"),t("#seat-cart-info").text(i),t("#checkout").css("display","inline-block")}t("#seat-cart-popup .cart-popup-inner").addClass("zoomIn"),t("#seat-cart-popup").css("display","block"),t("#modal-bg").css("display","block")},i.prototype.closeSeatCart=function(){t("#seat-cart-popup .cart-popup-inner").removeClass("zoomIn"),t("#seat-cart-popup").css("display","none"),t("#modal-bg").css("display","none")},i.prototype.openCheckOut=function(){var e=this.selectedSeats.length;0!=e&&(t("#seat-cart-popup").css("display","none"),this.generateCheckout(e),t("#checkout-area").css("display","block"),t("#modal-bg").css("display","block"))},i.prototype.openInfo=function(){t("#modal-bg").css("display","block"),t("#extra-info").css("display","block")},i.prototype.closeCheckOut=function(){t("#checkout-area").css("display","none"),t("#modal-bg").css("display","none"),t("#request-error").text("").css("display","none")},i.prototype.generateCheckout=function(e){t("#checkout-input-area").empty();for(var i=t(document.createDocumentFragment()),s=this.customF.length,o=0;e>o;o++){for(var n=t('<div class="check-item"></div>'),a=t('<div class="check-item-head">'+this.spotName+" nr <span>"+this.selectedSeats[o].nr+"</span><br><span>"+this.selectedSeats[o].room+"</span></div>"),r=t(document.createDocumentFragment()),l=this.selectedSeats[o].defFields.length,h=0;l>h;h++){var c=this.generateField(this.selectedSeats[o].defFields[h]);r.append(c)}for(var h=0;s>h;h++){var c=this.generateCustomField(this.customF[h]);r.append(c)}var p=t('<input type="hidden" class="item-id" name="item-id[]" value="'+this.selectedSeats[o].id+'" />'),d=t('<input type="hidden" class="item-nr" name="item-nr[]" value="'+this.selectedSeats[o].nr+'" />'),u=t('<input type="hidden" name="room-uuid[]" value="'+this.selectedSeats[o].roomUUID+'" />');n.append(a,r,p,d,u),i.append(n)}if(e>1){if(1==this.gmailNeeded)var m=t('<div style="text-align:center;margin-top:16px"><label class="field-label">'+v.translate("confWillBeSentTogmail")+'</br> <input type="text" id="prim-mail" class="field-input" data-field="Email"><span class="field-error"></span></label></div>');else var m=t('<div style="text-align:center;margin-top:16px"><label class="field-label">'+v.translate("confWillBeSentTo")+'</br> <input type="text" id="prim-mail" class="field-input" data-field="Email"><span class="field-error"></span></label></div>');i.append(m)}t("#checkout-input-area").append(i),1==e&&1==this.gmailNeeded&&t('#checkout-input-area .field-input[data-field="Email"]').prev().text("Email (Gmail required)")},i.prototype.generateField=function(e){var i;switch(e){case"FirstName":i=v.translate("firstName");break;case"LastName":i=v.translate("lastName");break;case"Email":i=v.translate("eMail")}var s=t('<label class="field-label"><span class="l-text">'+i+"</span></label>"),o=t('<input type="text" name="'+e+'[]" class="field-input" data-field="'+e+'" maxlength="100">'),n=t('<span class="field-error">error</span>');return s.append(o,n),s},i.prototype.generateCustomField=function(e){var i=t('<label class="field-label custom-input" data-label="'+e.label+'"><span class="l-text">'+e.label+"</span></label>");if("text"==e.type)var s=t('<input type="text" name="'+e.label+'[]" class="field-input" data-field="'+e.label+'" data-type="'+e.type+'" maxlength="'+WP_Seatreg.SEATREG_CUSTOM_TEXT_FIELD_MAX_LENGTH+'">');else if("check"==e.type)var s=t('<input type="checkbox" name="'+e.label+'[]" class="field-input" data-field="'+e.label+'" data-type="'+e.type+'" value="'+e.label+'">');else if("sel"==e.type)for(var s=t('<select name="'+e.label+'[]" class="field-input" data-type="'+e.type+'"></select>'),o=e.options.length,n=0;o>n;n++)s.append('<option value="'+e.options[n]+'">'+e.options[n]+"</option>");var a=t('<span class="field-error">error</span>');return i.append(s,a),i},i.prototype.openModel=function(){t("#modal-bg").css("display","block"),t("#room-nav").addClass("modal")},i.prototype.closeModal=function(){t("#modal-bg").css("display","none"),t("#room-nav").removeClass("modal")},i.prototype.openSeatDialog=function(e){var i=this.paintSeatDialog(e);i&&(t("#modal-bg").css("display","block"),t("#confirm-dialog-mob").css("display","block"),t("#confirm-dialog-mob-inner").removeClass("zoomOut").addClass("zoomIn"))},i.prototype.closeSeatDialog=function(){t("#confirm-dialog-mob").css("display","none"),t("#modal-bg").css("display","none")},i.prototype.paintSeatDialog=function(i){t("#confirm-dialog-mob-hover, #confirm-dialog-mob-legend").empty().css("display","none"),t("#confirm-dialog-mob-text").empty(),t("#confirm-dialog-mob-ok").css("display","none");var s=null,o=null,n=i.getAttribute("data-seat-nr"),a=i.getAttribute("data-seat"),r="true"===i.getAttribute("data-lock"),l="true"===i.getAttribute("data-password"),h="box",c=this.rooms[this.currentRoom].room,p=this.rooms[this.currentRoom].room.name,d=!1,u=!1,m=0;return i.hasAttribute("data-powertip")&&(t("#confirm-dialog-mob-hover").css("display","block"),s=i.getAttribute("data-powertip"),d=!0),i.hasAttribute("data-legend")&&(t("#confirm-dialog-mob-legend").css("display","block"),o=i.getAttribute("data-legend"),d=!0),i.hasAttribute("data-seat")&&(t("#selected-seat").val(i.getAttribute("data-seat")),t("#selected-seat-room").val(c.name),t("#selected-room-uuid").val(c.uuid),h="rbox",t("#selected-seat-nr").val(n),d=!0),i.hasAttribute("data-status")&&(h=i.getAttribute("data-status"),d=!0),i.hasAttribute("data-selectedBox")&&(u=!0),i.hasAttribute("data-price")&&(m=i.getAttribute("data-price"),t("#selected-seat-price").val(m)),null!=s&&t("#confirm-dialog-mob-hover").html(s),"box"!=h&&(u?t("#confirm-dialog-mob-text").html('<div class="add-seat-text"><h5>'+e(this.spotName)+" "+n+v.translate("_isAlreadySelected")+"</h5></div>"):r?(t("#confirm-dialog-mob-ok").css("display","none"),t("#confirm-dialog-mob-text").html('<div class="seat-taken-notify">'+v.translate("seatIsLocked")+"</div>")):l&&!this.enteredSeatPasswords.hasOwnProperty(a)?(t("#confirm-dialog-mob-ok").css("display","none"),t("#confirm-dialog-mob-text").html('<div class="seat-taken-notify">'+v.translate("pleaseEnterPassword")+'</div><div class="box-password-wrap"><input type="text" id="seat-password" /> <div class="seatreg-btn green-btn" id="password-check">Ok</div></div><div id="password-error" class="d-none" style="color:red">'+v.translate("passwordNotCorrect")+'</div><div id="password-check-loader" class="d-none"><img alt="Loading..." src="'+WP_Seatreg.plugin_dir_url+'img/ajax_loader_small.gif" /></div>')):"rbox"==h&&this.selectedSeats.length<this.seatLimit?"run"==this.status?(t("#confirm-dialog-mob-text").html('<div class="add-seat-text"><h5>'+v.translate("add_")+" "+this.spotName+" "+n+v.translate("_fromRoom_")+" "+p+v.translate("_toSelection")+"</h5><p>"+v.translate("maxSeatsToAdd")+" "+this.seatLimit+"</p></div>"),this.payPalEnabled&&this.payPalCurrencyCode&&m>0&&t("#confirm-dialog-mob-text .add-seat-text").append("<p>"+v.translate("seatCosts_")+"<strong>"+m+" "+this.payPalCurrencyCode+"</strong></p>"),t("#confirm-dialog-mob-ok").css("display","inline-block")):t("#confirm-dialog-mob-text").html('<div class="add-seat-text"><h5>'+this.spotName+" "+n+v.translate("_fromRoom_")+p+"</h5></div>"):"tak"==h?(t("#confirm-dialog-mob-ok").css("display","none"),t("#confirm-dialog-mob-text").html('<div class="seat-taken-notify"><h5>'+v.translate("this_")+this.spotName+v.translate("_isOccupied")+"</h5></div>")):"bron"==h?(t("#confirm-dialog-mob-ok").css("display","none"),t("#confirm-dialog-mob-text").html('<div class="seat-bron-notify"><h5>'+v.translate("this_")+" "+this.spotName+v.translate("_isPendingState")+"</h5>"+v.translate("regOwnerNotConfirmed")+"</div>")):"rbox"==h&&this.selectedSeats.length>=this.seatLimit&&(t("#confirm-dialog-mob-ok").css("display","none"),t("#confirm-dialog-mob-text").html('<div class="seat-taken-notify">'+v.translate("selectionIsFull")+"</div>"))),d?!0:!1},i.prototype.addEnteredSeatPassword=function(t,e){this.enteredSeatPasswords[t]=e};var X=new i;return X.browserInfo(),null===dataReg?(t("body").append('<div class="under-construction-notify"><span class="icon-construction6 index-icon"></span>'+v.translate("_regUnderConstruction")+"</div>"),!1):(X.fillLocationObj(),t(window).resize(function(){w=new Date,x===!1&&(x=!0,setTimeout(o,S))}),t("#room-nav-btn").on("click",function(){X.openModel()}),t("#close-modal").on("click",function(){X.closeModal()}),t("#seat-cart, .mobile-cart").on("click",function(){X.openSeatCart()}),t("#dialog-close-btn").on("click",function(){X.closeSeatDialog()}),t("#confirm-dialog-mob-ok").on("click",function(){X.addSeatToCart()}),t("#confirm-dialog-mob-cancel").on("click",function(){X.closeSeatDialog()}),t("#room-nav-close").on("click",function(){X.closeModal()}),t("#checkout").on("click",function(){X.openCheckOut()}),t("#checkout-input-area").on("keyup",".field-input",function(){h(t(this))}),t(".refresh-btn").on("click",function(){window.location.reload()}),t("#confirm-dialog-mob-text").on("click","#password-check",function(){var e=t("#selected-seat").val(),i=t("#seat-password").val();t("#password-error").addClass("d-none"),t("#password-check-loader").removeClass("d-none"),t.ajax({type:"POST",url:ajaxUrl,data:{action:"seatreg_seat_password_check",password:t("#seat-password").val(),"registration-code":Y.c,"seat-id":e},success:function(s){t("#password-check-loader").addClass("d-none"),s.success?(X.addEnteredSeatPassword(e,i),X.openSeatDialog(t(".box[data-seat="+e+"]")[0])):t("#password-error").removeClass("d-none")}})}),t("#checkoput-area-inner").submit(function(e){e.preventDefault(),t("#request-error").text("");var i=!0;return t("#checkout-input-area .field-input").each(function(){h(t(this))||(i=!1)}),""==t("#captcha-val").val()?(t("#captcha-val").focus(),void t("#request-error").text("Enter captcha").css("display","block")):void(i&&d(p(),Y.c))}),t("#captcha-ref").on("click",function(){t.ajax({type:"POST",url:ajaxUrl,data:{action:"seatreg_new_captcha",cap:"new"},success:function(e){t("#captcha-img").replaceWith(e)}})}),t("#close-time").on("click",function(){t("#time-notify, .modal-bg").css("display","none")}),t(".room-nav-extra-info-btn, #main-header").on("click",function(){X.openInfo()}),t(".mobile-legend").on("click",function(){t(".legend-popup-legends").html(t("#legends").html()),t("#modal-bg").css("display","block"),t("#legend-popup-dialog").css("display","block")}),t(".close-btn").on("click",function(){var e=t(this).closest(".dialog-box");e.css("display","none"),t("#modal-bg").css("display","none"),t("#request-error").text("").css("display","none")}),t(".zoom-action").on("click",function(){null!=k&&k.zoom("in"==t(this).data("zoom")?k.scale+.4:k.scale-.4)}),t(".move-action").on("click",function(){if(null!=k)switch(t(this).data("move")){case"up":k.y<0&&k.scrollBy(0,100);break;case"left":k.x<0&&k.scrollBy(100,0);break;case"right":k.scrollBy(-100,0);break;case"down":{X.rooms[X.currentRoom].room[5]}k.scrollBy(0,-100)}}),null!=X.rooms&&X.init(),void t("#middle-section").on("DOMMouseScroll mousewheel",function(t){t.preventDefault();var e=t.originalEvent.clientX,i=t.originalEvent.clientY;return t.originalEvent.detail>0||t.originalEvent.wheelDelta<0?f(e,i):g(e,i),!1}))}(jQuery);